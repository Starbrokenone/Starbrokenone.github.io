---
layout:     post
title:      小程序云开发初体验
subtitle:   知晓云
date:       2019-02-15
author:     Starbroken
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - 微信小程序
---

# 小程序云开发（一）

## 云开发基本情况

云开发（Tencent Cloud Base, TCB)是腾讯云为移动开发者提供的一站式后端云服务，它帮助开发者统一构建和管理资源，免去了移动引用开发过程中繁琐的服务器搭建以及运维、域名注册及备案、数据接口实现等繁琐的流程，让开发者可以专注于业务逻辑的实现，而无需理解后端逻辑及服务器运维知识，开发门槛更低，效率更高。 

## 云开发能力

- 云数据库：提供高性能的数据库写入和查询服务。通过TCB的SDK，可以直接在客户端对数据经行读写，也可以在云函数中读写数据，还可以通过控制台，数据进行可视化的增删改查等操作。目前云开发的数据库为Mongodb
- 存储：提供高扩展性，低成本、可靠和安全的文件存储服务。可以满足不同场景下的文件访问管理。开发者可以在客户端和云函数端通过API直接使用存储
- 云函数：（运行环境node.js）云函数是在云端运行的函数，无需购买、搭建服务器，只需编写函数代码并部署到云端，即可在腾讯云基础设施上弹性、安全的运行代码。

## 编程基础

- HTML、CSS，务必掌握flex布局
- Js推荐更多的使用ES5，ES6，深入了解js事件触发机制
- Node.js运行在服务端的javascript，云函数现有唯一支持的语言
- MongoDB：介于关系型数据库和非关系型数据库之间的产品，是非关系型数据库当中功能最丰富，最像关系数据库的。云开发现有唯一支持的数据库。
- vue.js现有前端开发必备能力

## 云开发流程

小程序开发-普通开发：购买服务器域名，部署服务器环境，配置SSL证书，配置服务器信息，请求调试

小程序云开发：调用API

两种开发可兼容

## 云开发开通与项目初始化

1. 新建小程序项目，必须填写APPID（不可使用测试号，如果使用测试号你是选不了云开发的，腾讯说的，不解释），后端服务使用小程序云开发。
2. 点击微信开发者工具云开发工具栏开通云开发（AppID 首次开通云环境后，需等待大约 10 分钟方可正常使用云 API，在此期间官方后台服务正在做准备服务，如尝试在小程序中调用云 API 则会报 `cloud init error：{ errMsg: "invalid scope" }` 的错误 ，这个时候不要慌，等10分钟左右就好了）
3. project.config.json添加字段cloudfunctionRoot用于指定存放云函数的目录
4. 使用云能力前，需先调用wx.cloud.init方法完成云能力初始化（env：指定云开发环境）
5. 获取openid（数据库操作大多需要用户openid，需要先配置好login云函数）

## 数据库开发基础

### 上手数据库

- 创建第一个集合：打开控制台，选择“数据库 ”标签页，通过“添加集合”入口创建一个集合。假设我们要创建一个数据查询小程序，我们创建一个名为test的集合。创建成功后，可以看到test集合管理界面，界面中我们可以添加记录、查找记录、管理索引和管理权限。



## 

## 
